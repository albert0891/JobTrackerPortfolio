<h2 mat-dialog-title>AI Analysis: {{ data.jobTitle }}</h2>

<mat-dialog-content>
  @if (isLoading()) {
  <div class="loading-container">
    <p>Consulting Gemini AI...</p>
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  </div>
  } @if (errorMessage()) {
  <div class="error-container">
    <mat-icon color="warn">error</mat-icon>
    <p>{{ errorMessage() }}</p>
  </div>
  } @if (analysisData(); as result) {
  <div class="result-container">
    <div class="score-section">
      <div class="score-circle" [ngClass]="getScoreColor(result.matchScore)">
        <span class="score-value">{{ result.matchScore }}</span>
        <span class="score-label">Match</span>
      </div>
    </div>

    <div class="section">
      <h3>ðŸ’ª Strengths</h3>
      <p>{{ result.strengths }}</p>
    </div>

    <div class="section">
      <h3>ðŸ”‘ Missing Keywords</h3>
      <p class="hint">Consider adding these to your resume:</p>
      <mat-chip-set>
        @for (keyword of result.keywordsToIntegrate; track keyword) {
        <mat-chip>{{ keyword }}</mat-chip>
        }
      </mat-chip-set>
    </div>
  </div>
  }
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="close()">Close</button>
</mat-dialog-actions>
